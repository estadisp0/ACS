var matched, browser;

jQuery.uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
        /(msie) ([\w.]+)/.exec( ua ) ||
        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
        [];

    return {
        browser: match[ 1 ] || "",
        version: match[ 2 ] || "0"
    };
};

matched = jQuery.uaMatch( navigator.userAgent );
browser = {};

if ( matched.browser ) {
    browser[ matched.browser ] = true;
    browser.version = matched.version;
}

// Chrome is Webkit, but Webkit is also Safari.
if ( browser.chrome ) {
    browser.webkit = true;
} else if ( browser.webkit ) {
    browser.safari = true;
}

jQuery.browser = browser;
/*
 * FILo <> Facebook Image Loader jQuery Plugin v1.2.3
 * http://www.berlinpix.com/filo
 *
 * Copyright 2015, BerlinPix.com
 * licensed under the LGPL license.
 *
 * last update: 2015-07-13
 */
 !function(e){function o(e,o,i,a){if("function"==typeof a.before){var r=jQuery.Event("FILo Before Event");a.before(r)}var n=e.filo.root_path,l=void 0==a.filo_loaderGraphic?n+e.filo.filo_loaderGraphicDefault:a.filo_loaderGraphic;if(null==e(".filo_loader")||0==e(".filo_loader").length){var s=new Image;s.onload=function(){e(s).css("marginTop",this.height/2*-1),e(s).css("marginLeft",this.width/2*-1),e("#"+String(o)).append(s)},s.setAttribute("class","filo_loader"),s.src=l}var c=new Array;e.each(e("#"+String(o)).find(".excluded"),function(o,t){c.push(e(t).attr("id"))});var d=new Array;if(e.each(e("#"+o).find(".album"),function(o,t){d.push(e(t).attr("id"))}),void 0!=a.albums&&a.albums.length>0)for(var f=0;f<a.albums.length;f++)d.push(decodeURI(a.albums[f]));if(void 0!=a.excluded&&a.excluded.length>0)for(var f=0;f<a.excluded.length;f++)c.push(decodeURI(a.excluded[f]));var u="https://graph.facebook.com/fql?q=",h="";if(isNaN(i)){var p="SELECT page_id FROM page WHERE username = '"+i+"'",v="SELECT aid, name FROM album WHERE owner IN (SELECT page_id FROM #page_id)";h=JSON.stringify({page_id:p,albums:v})}else{var v="SELECT aid, name FROM album WHERE owner = "+i;h=JSON.stringify({albums:v})}u+=encodeURIComponent(h),e.browser.msie?e.ajax({url:u,dataType:"jsonp"}).success(function(r){var n=r.data,l=n.length>1?n[1].fql_result_set:n[0].fql_result_set;t(e,o,i,l,d,c,a)}):e.getJSON(u,function(r){var n=r.data,l=n.length>1?n[1].fql_result_set:n[0].fql_result_set;l.length<=0&&(e(".filo_loader").remove(),alert("There are no albums, please check your Facebook-ID")),t(e,o,i,l,d,c,a)}).error(function(){e(".filo_loader").remove(),alert("Error while loading, please check your Facebook-ID or write me: info@berlinpix.com")})}function t(e,o,t,a,r,l,d){e.filo.toLoad[o]=0,e.filo.isLoaded[o]=0;for(album in a)a[album].name=c(a[album].name);var f="https://graph.facebook.com/fql?q=",u="",h="SELECT src, src_big, src_big_width, images FROM photo WHERE aid = ";r.length>0?e.each(a,function(a,l){if(n(l.name,r)){e.filo.toLoad[o]+=1;var c=e.filo.maxCountDefault;void 0!=e("#"+o+" #"+l.name).attr("maxCount")?c=parseInt(e("#"+o+" #"+l.name).attr("maxCount")):void 0!=e("#"+o+" #"+l.name.toLowerCase()).attr("maxCount")?c=parseInt(e("#"+o+" #"+l.name.toLowerCase()).attr("maxCount")):void 0!=d&&void 0!=d.maxCount&&(c=d.maxCount),u=JSON.stringify("all"==c?{photos:h+"'"+l.aid+"' LIMIT 1000"}:{photos:h+"'"+l.aid+"' LIMIT "+c});var p=f+encodeURIComponent(u);jq("#"+o+" .album").each(function(o,t){e(t).attr("id").toLowerCase()===l.name.toLowerCase()&&e(t).remove()});var v=e('<div class="album" id="'+l.name+'"></div>').append('<div class="title">'+s(l.name)+'</div><div class="thumbs"></div>');e(v).hide(),e("#"+o).append(v);{"all"==c?l.count:c}e.browser.msie?e.ajax({url:p,dataType:"jsonp"}).success(function(a){var r=a.data[0].fql_result_set;i(1,e,t,o,r,v,c,d)}):e.getJSON(p,function(a){var r=a.data[0].fql_result_set;i(1,e,t,o,r,v,c,d)})}}):e.each(a,function(a,r){if(!n(r.name,l)){e.filo.toLoad[o]+=1;var c=e.filo.maxCountDefault;void 0!=d&&void 0!=d.maxCount?c=d.maxCount:void 0!=e("#"+r.name).attr("maxCount")&&(c=parseInt(e("#"+r.name).attr("maxCount"))),u=JSON.stringify("all"==c?{photos:h+"'"+r.aid+"'"}:{photos:h+"'"+r.aid+"' LIMIT "+c});var p=f+encodeURIComponent(u),v=e('<div class="album" id="'+r.name+'"></div>').append('<div class="title">'+s(r.name)+'</div><div class="thumbs"></div>').hide();e("#"+o).append(v),e.browser.msie?e.ajax({url:p,dataType:"jsonp"}).success(function(a){var r=a.data[0].fql_result_set;i(1,e,t,o,r,v,c,d)}):e.getJSON(p,function(a){var r=a.data[0].fql_result_set;i(1,e,t,o,r,v,c,d)})}})}function i(e,o,t,i,r,n,l,s){var c=1==e?1:26*(e-1),d=new Array,f=r,u=o.filo.root_path;if(r.length<=0)return o(n).remove(),o.filo.isLoaded[i]+=1,void console.log('FILo: album "'+jq(n).attr("id")+'" is empty');if(void 0!=s.order&&"reverse"==s.order)f.reverse();else if(void 0!=s.order&&"random"==s.order){for(var h=new Array,p=new Array;h.length<l&&h.length<f.length;){var v=Math.floor(Math.random()*f.length);void 0==p[v]&&(h.push(f[v]),p[v]=!0)}f=h}var m=screen.width,_=screen.height,g=m>_;if(o.each(f,function(e,i){for(var f=i.images[0].source,h=i.images.length-1;h>0;h--)g?m<parseInt(i.images[h].width)&&(f=i.images[h].source,h=0):_<parseInt(i.images[h].height)&&(f=i.images[h].source,h=0);d[c-1]=f;var p=1==c?" first":"",v=c==l?" last":"",w=new Image,y=0;w.setAttribute("class","picture filo_picture"),w.setAttribute("id",c-1),w.onerror=function(){2>y?(console.log("load picture again: "+i.src),w.src=i.src,y++):(w.onerror=null,w.src=o.filo.root_path+o.filo.defaultImage)},w.src=i.src;var b=o('<div class="thumb thumb_'+c+p+v+'"><div class="inner"><a href="'+f+'"></a></div></div>');return o(b).find("a").append(w),o(n).find(".thumbs").append(b),o(n).find(".filo_picture").unbind("click"),o(n).find(".filo_picture").click(function(e){if(e.preventDefault(),void 0!=s.href){if(void 0!=s.method&&"post"==s.method.toLowerCase()){var i=1==s.newWindow?'target="_blank"':"";return o("body").append('<form id="filo_forward" '+i+' method="POST" action="'+s.href+'"><input name="profile" value="'+t+'" /><input name="album" value="'+o(n).attr("id")+'" /></form>'),o("#filo_forward").trigger("submit").remove(),!1}return s.newWindow?(window.open(s.href+"?profile="+t+"&album="+o(n).attr("id")),!1):(document.location=s.href+"?profile="+t+"&album="+o(n).attr("id"),!1)}if(o(".filo_overlay").length<1){o.filo.closeButton=u+o.filo.closeButtons.black,void 0!=s.closeButton&&(o.filo.closeButton=void 0!=o.filo.closeButtons[s.closeButton]?u+o.filo.closeButtons[s.closeButton]:s.closeButton);var r=900;o.each(o("body *"),function(e,t){"auto"!=o(t).css("zIndex")&&(r=Math.max(r,parseInt(o(t).css("zIndex"))))});var l=void 0!=s.overlay?"background: "+s.overlay+"; ":"background: "+o.filo.overlayDefault+";",c=void 0!=s.overlayOpacity?" opacity: "+s.overlayOpacity+";":" opacity: "+o.filo.overlayOpacityDefault+";";o("body").append('<div class="filo_overlay" style="z-index:'+(r+1)+';" ><div class="filo_overlay_background" style="'+l+c+'"></div><div class="filo_overlay_container"><div class="filo_overlay_container_left"></div><div class="filo_overlay_container_right"></div><div class="picture_counter"></div></div></div>');var f=new Image;f.onload=function(){o(".filo_overlay_container").append(f);var e=o(".filo_overlay_container").css("border-width")>0?o(".filo_overlay_container").css("border-width"):17;o(this).css("right",-1*(this.width/2+e)),o(this).css("top",-1*(this.height/2+e)),f.setAttribute("class","filo_overlay_container_close"),o(".filo_overlay_container_close").click(function(){o(".filo_overlay").remove()})},f.src=o.filo.closeButton,a(o,o(this).attr("id"),d,o(n).attr("id"),s),o(".filo_overlay_background").click(function(e){"filo_overlay_background"==o(e.target).attr("class")&&o(".filo_overlay").remove()}),o(".filo_overlay_container_left").click(function(){var e=parseInt(o(".filo_full_picture").attr("id"));e>0&&a(o,e-1,d,o(n).attr("id"),s)}),o(".filo_overlay_container_right").click(function(){var e=parseInt(o(".filo_full_picture").attr("id"));e<d.length-1&&a(o,e+1,d,o(n).attr("id"),s)}),o(".filo_overlay_container_left").mouseenter(function(){o(this).css("backgroundColor","none").css("background-image","url('"+u+"/img/left_white.png')").css("background-repeat","no-repeat").css("background-position","left center")}).mouseout(function(){o(this).css("background-image","")}),o(".filo_overlay_container_right").mouseenter(function(){o(this).css("backgroundColor","none").css("background-image","url('"+u+"/img/right_white.png')").css("background-repeat","no-repeat").css("background-position","right center")}).mouseout(function(){o(this).css("background-image","")})}}),void 0!=s.href&&(o(n).find(".title").unbind("click"),o(n).find(".title").css("cursor","pointer"),o(n).find(".title").click(function(){o(n).find(".filo_picture").first().trigger("click")})),c>=l?(o(n).append('<div class="clear"></div>'),!1):(c++,void(c==r.length&&o(n).append('<div class="clear"></div>')))}),o.filo.isLoaded[i]+=1,o(n).fadeIn("slow"),o.filo.isLoaded[i]==o.filo.toLoad[i]&&(o("#"+i+" .album").last().attr("class",o("#"+i+" .album").last().attr("class")+" last"),o("#"+i).append('<div class="clear"></div>'),o("#"+i+" .add").remove(),o("#"+i+" .excluded").remove(),o("#"+i+" .filo_loader").remove(),"function"==typeof s.load)){var w=jQuery.Event("FILo Load Event");s.load(w)}}function a(e,o,t,i,a){e(".filo_overlay_container_left").show(),e(".filo_overlay_container_right").show(),0==o&&e(".filo_overlay_container_left").hide(),o==t.length-1&&e(".filo_overlay_container_right").hide();var r=parseInt(e(".filo_overlay_container").css("border-top-width").split("px")[0]),n=parseInt(e(".picture_counter").height()),l=(a.maxWidth?a.maxWidth:e.filo.maxWidth)/100,s=(a.maxHeight?a.maxHeight:e.filo.maxHeight)/100,c=e(window).width()*l-r,d=e(window).height()*s-(r+n),f=new Image;f.onload=function(){var a,r,l=this.width,s=this.height;l>s?(a=l>c?c:l,r=a*s/l,r>d&&(r=s>d?d:s,a=r*l/s)):(r=s>d?d:s,a=r*l/s,a>c&&(a=l>c?c:l,r=a*s/l)),e(".filo_overlay_container .filo_full_picture").length>0?e(".filo_overlay_container .filo_full_picture").fadeOut(300,function(){e(f).css("display","none"),f.width=a,f.height=r,e(".filo_overlay_container").width(a).height(r).css("margin-left",a/2*-1).css("margin-top",r/2*-1-n).prepend(f).find(f).fadeIn(300),e(this).remove(),e(".filo_overlay_container_close").show(),e(".filo_overlay_container .picture_counter").html("<span>Album: "+i+" | Pic: "+(parseInt(o)+1)+" of "+t.length+"</span>")}):(e(f).width(a).height(r),e(".filo_overlay_container").width(a).height(r).css("margin-left",a/2*-1).css("margin-top",r/2*-1-n).prepend(f).fadeIn(300),e(".filo_overlay_container_close").show(),e(".filo_overlay_container .picture_counter").html("<span>Album: "+i+" | Pic: "+(parseInt(o)+1)+" of "+t.length+"</span>"));var u=e(".filo_overlay_container .picture_counter span").width(),h=(e(".filo_overlay_container .picture_counter span").css("paddingLeft").split("px")[0],e(".filo_overlay_container .picture_counter span").css("paddingRight").split("px")[0]);e(".filo_overlay_container .picture_counter").width(u+parseInt(h)+parseInt(h)).css("position","absolute").css("left","50%").css("marginLeft","-"+(u+parseInt(h)+parseInt(h))/2+"px")},f.setAttribute("class","filo_full_picture"),f.setAttribute("id",o),f.src=t[o]}function r(e,o){if(e(".filo_overlay").length>0&&!e.filo.resize){e(".filo_full_picture").css("width","").css("height",""),resize=!0;var t,i,a=(o.maxWidth?o.maxWidth:e.filo.maxWidth)/100,r=(o.maxHeight?o.maxHeight:e.filo.maxHeight)/100,n=parseInt(e(".filo_overlay_container").css("border-top-width").split("px")[0]),l=parseInt(e(".picture_counter").height()),s=e(window).width()*a-n,c=e(window).height()*r-(n+l),d=parseInt(e(".filo_full_picture").width()),f=parseInt(e(".filo_full_picture").height());d>f?(t=d>s?s:d,i=t*f/d,i>c&&(i=f>c?c:f,t=i*d/f)):(i=f>c?c:f,t=i*d/f,t>s&&(t=d>s?s:d,i=t*f/d)),e(".filo_overlay_container img.filo_full_picture").width(t),e(".filo_overlay_container").width(t).height(i).css("margin-left",t/2*-1).css("margin-top",i/2*-1-l),resize=!1}}function n(e,o){for(var t=0;t<o.length;t++)if(e.toLowerCase()===c(o[t]).toLowerCase())return!0;return!1}function l(){try{throw new Error}catch(o){var t="";if(void 0!=o.fileName)t=o.fileName.split("/");else{var i=document.getElementsByTagName("script");e.each(i,function(e,o){o.src.indexOf("filo.js")>=0&&(t=o.src.split("/"))})}if(""==t)return"filo/"}for(var a="",r=0;r<t.length-1;r++)a+=r<t.length-2?t[r]+"/":t[r];return a}function s(e){return e.replace(/[:]/g,"/")}function c(e){return e.replace(/[\/]/g,":").replace("&","und")}e.fn.filo=function(t){if(!e(this).length)return void console.log("filo container is undefined, please check the ID or class name");void 0===t&&(t={container:this}),e(this).addClass(-1==(void 0!=e(this).attr("class")&&e(this).attr("class").indexOf("template"))&&void 0!=t.template?"template_"+t.template+" filo":"filo");var i=e(this).attr("id"),a=i+"_"+Date.now();a=a.replace(/\./g,""),e(this).attr("id",a),o(e,a,i,t),e(window).unbind("resize"),e(window).resize(function(){r(e,t)})},e.filo=function(t,i){void 0===i?(i={},i.container="body"):void 0===i.container&&(i.container="body");var a=t+"_"+Date.now();a=a.replace(/\./g,"");var n=void 0!=i.template?"template_"+i.template:"";e(i.container).append('<div class="filo '+n+'" id="'+a+'"></div>'),o(e,a,t,i),e(window).unbind("resize"),e(window).resize(function(){r(e,i)})},jQuery.filo.getUrlParams=function(){for(var e,o=[],t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<t.length;i++)e=t[i].split("="),o.push(e[0]),o[e[0]]=e[1];return o},e(document).ready(function(){e.filo.toLoad=new Array,e.filo.isLoaded=new Array,e.filo.maxCountDefault=3,e.filo.overlayDefault="rgb(177,177,177)",e.filo.overlayOpacityDefault=.5,e.filo.filo_loaderGraphicDefault="/img/bpx_loader.gif",e.filo.photos_array=null,e.filo.resize=!1,e.filo.closeButtons={black:"/img/close_black.png",white:"/img/close_white.png"},e.filo.defaultImage="/img/default.png",e.filo.order=new Array("normal","reverse","random"),e.filo.method="post",e.filo.newWindow=!1,e.filo.root_path=l(),e.filo.ie=!1,e.support.cors=!0,e.filo.maxHeight=90,e.filo.maxWidth=90,e.filo.ignoreEmptyAlbums=!0;var t=new Array;e.each(e(".filo"),function(i,a){var n=e(a).attr("id"),l=n+"_"+Date.now()+"_"+Math.round(1e5*Math.random());l=l.replace(/\./g,""),e(a).attr("id",l),void 0!=e("#"+l).attr("maxCount")&&(t.maxCount=e("#"+l).attr("maxCount")),void 0!=e("#"+l).attr("href")&&(t.href=e("#"+l).attr("href")),void 0!=e("#"+l).attr("newWindow")&&(t.newWindow="true"==e("#"+l).attr("newWindow")?!0:!1),t.method=void 0!=e("#"+l).attr("method")?e("#"+l).attr("method"):"post",o(e,l,n,t),e(window).unbind("resize"),e(window).resize(function(){r(e,t)})})}),"undefined"==typeof e.browser&&(e.browser={msie:"Microsoft Internet Explorer"==navigator.appName}),Date.now=Date.now||function(){return+new Date}}(jQuery);